# datadog-agent-with-otelagentgateway.yaml
# This example shows how to enable the OTel Agent Gateway component
# The OTel Agent Gateway runs as a separate deployment and can be used
# to collect and forward OpenTelemetry data.

apiVersion: datadoghq.com/v2alpha1
kind: DatadogAgent
metadata:
  name: datadog
spec:
  global:
    credentials:
      apiSecret:
        secretName: datadog-secret
        keyName: api-key

  features:
    # Enable OTel Agent Gateway
    otelAgentGateway:
      enabled: true

  override:
    # Optional: Configure the OTel Agent Gateway deployment
    otelAgentGateway:
      # Number of replicas for the gateway
      replicas: 2
