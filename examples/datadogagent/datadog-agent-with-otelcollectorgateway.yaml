# datadog-agent-with-otelcollectorgateway.yaml
# This example shows how to enable the OTel Collector Gateway component
# The OTel Collector Gateway runs as a separate deployment and can be used
# to collect and forward OpenTelemetry data.

apiVersion: datadoghq.com/v2alpha1
kind: DatadogAgent
metadata:
  name: datadog
spec:
  global:
    credentials:
      apiSecret:
        secretName: datadog-secret
        keyName: api-key

  features:
    # Enable OTel Collector Gateway
    otelCollectorGateway:
      enabled: true

  override:
    # Optional: Configure the OTel Collector Gateway deployment
    otelCollectorGateway:
      # Number of replicas for the gateway
      replicas: 2
