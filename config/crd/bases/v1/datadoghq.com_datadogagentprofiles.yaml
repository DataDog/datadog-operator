---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.14.0
  name: datadogagentprofiles.datadoghq.com
spec:
  group: datadoghq.com
  names:
    kind: DatadogAgentProfile
    listKind: DatadogAgentProfileList
    plural: datadogagentprofiles
    shortNames:
    - dap
    singular: datadogagentprofile
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - jsonPath: .status.valid
      name: valid
      type: string
    - jsonPath: .status.applied
      name: applied
      type: string
    - jsonPath: .metadata.creationTimestamp
      name: age
      type: date
    name: v1alpha1
    schema:
      openAPIV3Schema:
        description: DatadogAgentProfile is the Schema for the datadogagentprofiles
          API
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: DatadogAgentProfileSpec defines the desired state of DatadogAgentProfile
            properties:
              config:
                properties:
                  override:
                    additionalProperties:
                      properties:
                        containers:
                          additionalProperties:
                            properties:
                              env:
                                description: |-
                                  Specify additional environment variables in the container.
                                  See also: https://docs.datadoghq.com/agent/guide/environment-variables/
                                items:
                                  $ref: '#/definitions/k8s.io~1api~1core~1v1~0EnvVar'
                                type: array
                                x-kubernetes-list-map-keys:
                                - name
                                x-kubernetes-list-type: map
                              resources:
                                $ref: '#/definitions/k8s.io~1api~1core~1v1~0ResourceRequirements'
                                description: |-
                                  Specify the Request and Limits of the pods.
                                  To get guaranteed QoS class, specify requests and limits equal.
                                  See also: http://kubernetes.io/docs/user-guide/compute-resources/
                            type: object
                          description: |-
                            Configure the basic configurations for an Agent container
                            Valid Agent container names are: `agent`
                          type: object
                        labels:
                          additionalProperties:
                            type: string
                          description: Labels provide labels that are added to the
                            Datadog Agent pods.
                          type: object
                        priorityClassName:
                          description: |-
                            If specified, indicates the pod's priority. "system-node-critical" and
                            "system-cluster-critical" are two special keywords which indicate the
                            highest priorities with the former being the highest priority. Any other
                            name must be defined by creating a PriorityClass object with that name.
                            If not specified, the pod priority will be default or zero if there is no
                            default.
                          type: string
                        runtimeClassName:
                          description: |-
                            If specified, indicates the pod's RuntimeClass kubelet should use to run the pod.
                            If the named RuntimeClass does not exist, or the CRI cannot run the corresponding handler, the pod enters the Failed terminal phase.
                            If no runtimeClassName is specified, the default RuntimeHandler is used, which is equivalent to the behavior when the RuntimeClass feature is disabled.
                          type: string
                        updateStrategy:
                          description: |-
                            The deployment strategy to use to replace existing pods with new ones.
                            Valid types are `RollingUpdate` or `OnDelete` for DaemonSets
                          properties:
                            rollingUpdate:
                              description: Configure the rolling update strategy of
                                the Deployment or DaemonSet.
                              properties:
                                maxSurge:
                                  anyOf:
                                  - type: integer
                                  - type: string
                                  description: |-
                                    MaxSurge behaves differently based on the Kubernetes resource. Refer to the
                                    Kubernetes API documentation for additional details.
                                  x-kubernetes-int-or-string: true
                                maxUnavailable:
                                  anyOf:
                                  - type: integer
                                  - type: string
                                  description: |-
                                    The maximum number of pods that can be unavailable during the update.
                                    Value can be an absolute number (ex: 5) or a percentage of desired pods (ex: 10%).
                                    Refer to the Kubernetes API documentation for additional details..
                                  x-kubernetes-int-or-string: true
                              type: object
                            type:
                              description: |-
                                Type can be "RollingUpdate" or "OnDelete" for DaemonSets and "RollingUpdate"
                                or "Recreate" for Deployments
                              type: string
                          type: object
                      type: object
                    description: Override the default configurations of the node agent.
                    type: object
                type: object
              profileAffinity:
                properties:
                  profileNodeAffinity:
                    items:
                      $ref: '#/definitions/k8s.io~1api~1core~1v1~0NodeSelectorRequirement'
                    type: array
                type: object
            type: object
          status:
            description: DatadogAgentProfileStatus defines the observed state of DatadogAgentProfile
            properties:
              applied:
                description: Applied shows whether the DatadogAgentProfile conflicts
                  with an existing DatadogAgentProfile.
                type: string
              conditions:
                description: Conditions represents the latest available observations
                  of a DatadogAgentProfile's current state.
                items:
                  description: "Condition contains details for one aspect of the current
                    state of this API Resource.\n---\nThis struct is intended for
                    direct use as an array at the field path .status.conditions.  For
                    example,\n\n\n\ttype FooStatus struct{\n\t    // Represents the
                    observations of a foo's current state.\n\t    // Known .status.conditions.type
                    are: \"Available\", \"Progressing\", and \"Degraded\"\n\t    //
                    +patchMergeKey=type\n\t    // +patchStrategy=merge\n\t    // +listType=map\n\t
                    \   // +listMapKey=type\n\t    Conditions []metav1.Condition `json:\"conditions,omitempty\"
                    patchStrategy:\"merge\" patchMergeKey:\"type\" protobuf:\"bytes,1,rep,name=conditions\"`\n\n\n\t
                    \   // other fields\n\t}"
                  properties:
                    lastTransitionTime:
                      description: |-
                        lastTransitionTime is the last time the condition transitioned from one status to another.
                        This should be when the underlying condition changed.  If that is not known, then using the time when the API field changed is acceptable.
                      format: date-time
                      type: string
                    message:
                      description: |-
                        message is a human readable message indicating details about the transition.
                        This may be an empty string.
                      maxLength: 32768
                      type: string
                    observedGeneration:
                      description: |-
                        observedGeneration represents the .metadata.generation that the condition was set based upon.
                        For instance, if .metadata.generation is currently 12, but the .status.conditions[x].observedGeneration is 9, the condition is out of date
                        with respect to the current state of the instance.
                      format: int64
                      minimum: 0
                      type: integer
                    reason:
                      description: |-
                        reason contains a programmatic identifier indicating the reason for the condition's last transition.
                        Producers of specific condition types may define expected values and meanings for this field,
                        and whether the values are considered a guaranteed API.
                        The value should be a CamelCase string.
                        This field may not be empty.
                      maxLength: 1024
                      minLength: 1
                      pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                      type: string
                    status:
                      description: status of the condition, one of True, False, Unknown.
                      enum:
                      - "True"
                      - "False"
                      - Unknown
                      type: string
                    type:
                      description: |-
                        type of condition in CamelCase or in foo.example.com/CamelCase.
                        ---
                        Many .condition.type values are consistent across resources like Available, but because arbitrary conditions can be
                        useful (see .node.status.conditions), the ability to deconflict is important.
                        The regex it matches is (dns1123SubdomainFmt/)?(qualifiedNameFmt)
                      maxLength: 316
                      pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                      type: string
                  required:
                  - lastTransitionTime
                  - message
                  - reason
                  - status
                  - type
                  type: object
                type: array
                x-kubernetes-list-map-keys:
                - type
                x-kubernetes-list-type: map
              createStrategy:
                description: CreateStrategy is the state of the create strategy feature.
                properties:
                  lastTransition:
                    description: LastTransition is the last time the status was updated.
                    format: date-time
                    type: string
                  maxUnavailable:
                    description: MaxUnavailable shows the number of pods that can
                      be in an unready state.
                    format: int32
                    type: integer
                  nodesLabeled:
                    description: NodesLabeled shows the number of nodes currently
                      labeled.
                    format: int32
                    type: integer
                  podsReady:
                    description: PodsReady shows the number of pods in the ready state.
                    format: int32
                    type: integer
                  status:
                    description: Status shows the current state of the feature.
                    type: string
                type: object
              currentHash:
                description: CurrentHash is the stored hash of the DatadogAgentProfile.
                type: string
              lastUpdate:
                description: LastUpdate is the last time the status was updated.
                format: date-time
                type: string
              valid:
                description: Valid shows if the DatadogAgentProfile has a valid config
                  spec.
                type: string
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
