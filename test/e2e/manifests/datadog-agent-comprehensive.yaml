apiVersion: datadoghq.com/v2alpha1
kind: DatadogAgent
metadata:
  name: datadog-comprehensive
  namespace: e2e-operator
  labels:
    agent.datadoghq.com/e2e-test: datadog-agent-comprehensive
spec:
  global:
    kubelet:
      tlsVerify: false
  features:
    clusterChecks:
      enabled: true
      useClusterChecksRunners: true
    liveContainerCollection:
      enabled: true
    logCollection:
      enabled: true
      containerCollectAll: true
    kubeStateMetricsCore:
      collectCrMetrics:
      - groupVersionKind:
          group: datadoghq.com
          kind: DatadogAgent
          version: v2alpha1
        metrics:
        - each:
            gauge:
              path:
              - status
              - agent
              - upToDate
            type: gauge
          help: Number of up-to-date agents
          name: uptodateagents
